// Autogenerated from templates.
requires "x86-semantic-utils.k"

/*@ This file defines the semantics of following 51 base instructions.
  - movq_r64_imm64, movq_r64_r64, movb_r8_rh, movb_rh_r8,
*/

module MOV-R64-R64
  imports X86-SEMANTIC-UTILS

  // Unroll START
Unroll START PATTERN-1
  rule <k> 
    execinstr ( movq , (%REG64 ,  (%REG64 , .Typedoperands)) ) => .
  ...</k>
Unroll END

  // Unroll START
Unroll START PATTERN-5
  rule <k> 
    execinstr ( movq , (%REG64_1 ,  (%REG64_2 , .Typedoperands)) ) =>
      updateReg(MI, %REG64_2)
  ...</k>
  <REG64_1> MI </REG64_1>
Unroll END
  // Unroll END
endmodule

module MOV-R64-IMM64
  imports X86-SEMANTIC-UTILS

  // Unroll START
Unroll START PATTERN-1
  rule <k> 
    execinstr ( movq , (I:Imm ,  (%REG64 , .Typedoperands)) ) =>
      updateReg(handleImmediate(I, 64), %REG64)
  ...</k>
Unroll END
  // Unroll END
endmodule

module MOV-R8-RH
  imports X86-SEMANTIC-UTILS

  // Unroll START
Unroll START PATTERN-12
  rule <k> 
    execinstr ( movb , (%REGH ,  (%REG8 , .Typedoperands)) ) =>
      updateReg( plugInMask(MI, extractMask(MI, 8, 8), 0), %REG64)
  ...</k>
  <REG64> MI </REG64>
Unroll END
  // Unroll END

  // Unroll START
Unroll START PATTERN-13
  rule <k> 
    execinstr ( movb , (%REGH_1 ,  (%REG8_2 , .Typedoperands)) ) =>
      updateReg( plugInMask(MI2, extractMask(MI1, 8, 8), 0), %REG64_2)
  ...</k>
  <REG64_1> MI1 </REG64_1>
  <REG64_2> MI2 </REG64_2>
Unroll END
  // Unroll END
endmodule

module MOV-RH-R8
  imports X86-SEMANTIC-UTILS

  // Unroll START
Unroll START PATTERN-12
  rule <k> 
    execinstr ( movb , (%REG8 ,  (%REGH , .Typedoperands)) ) =>
      updateReg( plugInMask(MI, extractMask(MI, 8, 0), 8), %REG64)
  ...</k>
  <REG64> MI </REG64>
Unroll END
  // Unroll END

  // Unroll START
Unroll START PATTERN-13
  rule <k> 
    execinstr ( movb , (%REG8_2 ,  (%REGH_1 , .Typedoperands)) ) =>
      updateReg( plugInMask(MI1, extractMask(MI2, 8, 0), 8), %REG64_1)
  ...</k>
  <REG64_1> MI1 </REG64_1>
  <REG64_2> MI2 </REG64_2>
Unroll END
  // Unroll END
endmodule

module MOV-SEMANTICS
  imports MOV-R64-R64
  imports MOV-R64-IMM64
  imports MOV-R8-RH
  imports MOV-RH-R8
endmodule
