// Autogenerated from templates.
requires "x86-semantic-utils.k"

/*@ This file defines the semantics of following 51 base instructions.
  - vaddpd_ymm_ymm_ymm, vaddps_ymm_ymm_ymm,
*/

module VADDPD_YMM_YMM_YMM
  imports X86-SEMANTIC-UTILS

  // Unroll START
Unroll START PATTERN-15
  rule <k>
    execinstr ( addpd , %YMM ,  %YMM , DestR, .Typedoperands) =>
      execinstr( addpd, DestR, 
      joinVector(operateOnVector(splitVector(MI, 64), splitVector(MI, 64), vfadd, 64)), 
      .Typedoperands)
  ...</k>
  <YMM> MI </YMM>
Unroll END
  // Unroll END

  // Unroll START
Unroll START PATTERN-16
  rule <k>
    execinstr ( addpd , %YMM1 ,  %YMM2 , DestR, .Typedoperands) =>
      execinstr( addpd, DestR, 
      joinVector(operateOnVector(splitVector(MI1, 64), splitVector(MI2, 64), vfadd, 64)), 
      .Typedoperands)
  ...</k>
  <YMM1> MI1 </YMM1>
  <YMM2> MI2 </YMM2>
Unroll END
  // Unroll END

  rule <k> execinstr(addpd, DestR:Ymm, MIsrc:MInt, .Typedoperands ) => updateReg(MIsrc, DestR) ...</k>
endmodule

module VADDPS_YMM_YMM_YMM
  imports X86-SEMANTIC-UTILS

  // Unroll START
Unroll START PATTERN-15
  rule <k>
    execinstr ( addps , %YMM ,  %YMM , DestR, .Typedoperands) =>
      execinstr( addps, DestR, 
      joinVector(operateOnVector(splitVector(MI, 32), splitVector(MI, 32), vfadd, 32)), 
      .Typedoperands)
  ...</k>
  <YMM> MI </YMM>
Unroll END
  // Unroll END

  // Unroll START
Unroll START PATTERN-16
  rule <k>
    execinstr ( addps , %YMM1 ,  %YMM2 , DestR, .Typedoperands) =>
      execinstr( addps, DestR, 
      joinVector(operateOnVector(splitVector(MI1, 32), splitVector(MI2, 32), vfadd, 32)), 
      .Typedoperands)
  ...</k>
  <YMM1> MI1 </YMM1>
  <YMM2> MI2 </YMM2>
Unroll END
  // Unroll END

  rule <k> execinstr(addps, DestR:Ymm, MIsrc:MInt, .Typedoperands ) => updateReg(MIsrc, DestR) ...</k>
endmodule


module VADD-SEMANTICS
  imports VADDPD_YMM_YMM_YMM
  imports VADDPS_YMM_YMM_YMM
endmodule
